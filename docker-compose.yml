services:
  deilabs-bot:
    build: .
    container_name: deilabs-bot
    restart: unless-stopped
    environment:
      TELEGRAM_BOT_TOKEN: ${TELEGRAM_BOT_TOKEN}
      BOT_TIMEZONE: ${BOT_TIMEZONE:-Europe/Rome}
      ADMIN_USER_IDS: ${ADMIN_USER_IDS:-}
      DEILABS_DATA_DIR: /data
    volumes:
      - deilabs-data:/data

  deilabs-web:
    build: .
    container_name: deilabs-web
    restart: unless-stopped
    command: ["python", "-m", "deilabs_bot.web"]
    environment:
      DEILABS_DATA_DIR: /data
      DEILABS_WEB_HOST: 0.0.0.0
      DEILABS_WEB_PORT: ${DEILABS_WEB_PORT:-8080}
      DEILABS_WEB_REFRESH_SECONDS: ${DEILABS_WEB_REFRESH_SECONDS:-30}
      DEILABS_WEB_TITLE: ${DEILABS_WEB_TITLE:-DeiLabs Presence Dashboard}
    volumes:
      - deilabs-data:/data
    ports:
      - "${DEILABS_WEB_PORT:-8080}:${DEILABS_WEB_PORT:-8080}"

volumes:
  deilabs-data:
    name: deilabs-data
